# レスポンシブデザインテストスイート

このディレクトリには、HOSHUTAROアプリケーションのレスポンシブデザイン機能に対する包括的なテストが含まれています。

## テストファイル構成

### 1. ResponsiveLayout.test.tsx
レスポンシブレイアウトフックの基本機能をテストします。

**テスト内容:**
- ブレークポイント検出（xs, sm, md, lg, xl）
- デバイス向き検出（portrait/landscape）
- タッチサポート検出
- デバイス機能検出（hover, pointer）
- レスポンシブレイアウト計算
- ウィンドウリサイズハンドリング
- 列表示制御
- グリッドテンプレート生成

### 2. TouchOperations.test.tsx
タッチデバイスでの操作性をテストします。

**テスト内容:**
- タブレット向けタッチ操作
  - ステータスセルのタップ
  - コストセルのタップ
  - 展開/折りたたみ操作
  - 列切り替え操作
  - 適切なタッチターゲットサイズ
- モバイル向けタッチ操作
  - カード展開操作
  - 編集ダイアログ操作
  - ダイアログ内タッチ操作
  - コストモード編集
  - モバイル用タッチターゲットサイズ
- タッチジェスチャーサポート
- アクセシビリティ対応

### 3. BreakpointDisplay.test.tsx
各ブレークポイントでの表示動作をテストします。

**テスト内容:**
- 各ブレークポイントでの表示確認
  - Extra Small (xs) - 480px未満
  - Small (sm) - 480px-767px
  - Medium (md) - 768px-1023px
  - Large (lg) - 1024px-1199px
  - Extra Large (xl) - 1200px以上
- ブレークポイント間の遷移
- 向き変更の処理
- ヘッダーのレスポンシブ動作
- CSSメディアクエリ統合

### 4. ResponsiveTestSuite.test.tsx
統合的なレスポンシブデザインテストスイートです。

**テスト内容:**
- ブレークポイント検出とレイアウト適応
- タッチデバイス検出と適応
- 動的レイアウト更新
- タッチインタラクションテスト
- グリッドレイアウトレスポンシブ性
- アクセシビリティと使いやすさ
- パフォーマンスと最適化

## テスト実行方法

### 全レスポンシブテストの実行
```bash
npm test -- --testPathPatterns="ResponsiveDesign" --watchAll=false
```

### 個別テストファイルの実行
```bash
# レスポンシブレイアウトテスト
npm test -- --testPathPatterns="ResponsiveLayout" --watchAll=false

# タッチ操作テスト
npm test -- --testPathPatterns="TouchOperations" --watchAll=false

# ブレークポイント表示テスト
npm test -- --testPathPatterns="BreakpointDisplay" --watchAll=false

# 統合テストスイート
npm test -- --testPathPatterns="ResponsiveTestSuite" --watchAll=false
```

## テスト対象コンポーネント

### 1. useResponsiveLayout Hook
- ブレークポイント検出
- デバイス機能検出
- レイアウト計算ユーティリティ

### 2. useDeviceCapabilities Hook
- タッチサポート検出
- ホバー機能検出
- ポインター精度検出

### 3. TabletGridView Component
- タブレット向けグリッド表示
- 列切り替え機能
- タッチ操作対応

### 4. MobileGridView Component
- モバイル向けカード表示
- 編集ダイアログ
- タッチ最適化UI

### 5. ResponsiveDemo Component
- レスポンシブデモ機能
- 強制モード切り替え
- デバイス情報表示

## テストカバレッジ

### 機能カバレッジ
- ✅ ブレークポイント検出（5段階）
- ✅ タッチデバイス対応
- ✅ 向き変更対応
- ✅ 動的レイアウト更新
- ✅ タッチ操作性
- ✅ アクセシビリティ
- ✅ パフォーマンス最適化

### デバイスカバレッジ
- ✅ モバイル（480px未満）
- ✅ 小型モバイル（480px-767px）
- ✅ タブレット（768px-1023px）
- ✅ デスクトップ（1024px-1199px）
- ✅ 大型デスクトップ（1200px以上）

### インタラクションカバレッジ
- ✅ マウス操作
- ✅ タッチ操作
- ✅ キーボード操作
- ✅ ジェスチャー操作

## テスト品質指標

### アクセシビリティ
- タッチターゲットサイズ（最小44px）
- キーボードナビゲーション
- ARIA属性
- 読みやすさ

### パフォーマンス
- 過度な再レンダリング防止
- メモリリーク防止
- 高速レスポンス

### 互換性
- 複数ブレークポイント対応
- 異なるデバイス機能対応
- 向き変更対応

## 要件対応

このテストスイートは以下の要件に対応しています：

### 要件6.1: タブレット・モバイル対応
- タッチ操作最適化UI
- 横スクロール可能表示
- 小画面詳細展開

### 要件6.2: レスポンシブ対応
- 画面サイズ自動調整
- 重要情報優先表示
- 適応的レイアウト

## 注意事項

### テスト環境
- Jest + React Testing Library
- jsdom環境でのDOM操作
- モックされたwindow.matchMedia
- モックされたResizeObserver

### 制限事項
- 実際のタッチイベントは完全にシミュレートできない
- 実際のデバイス固有の動作は再現できない
- CSS計算値の一部は近似値

### 今後の改善点
- 実デバイスでのE2Eテスト追加
- パフォーマンステストの詳細化
- アクセシビリティテストの拡充